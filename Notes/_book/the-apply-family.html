<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 5 The apply family | Intermediate R Workshop Notes</title>
  <meta name="description" content="Lecture notes from the workshop" />
  <meta name="generator" content="bookdown 0.18.1 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 5 The apply family | Intermediate R Workshop Notes" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Lecture notes from the workshop" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 5 The apply family | Intermediate R Workshop Notes" />
  
  <meta name="twitter:description" content="Lecture notes from the workshop" />
  

<meta name="author" content="Hena R. Ramay" />


<meta name="date" content="2020-05-25" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="functions.html"/>
<link rel="next" href="advanced-plotting.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Workshop Notes</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#workshop-schedule"><i class="fa fa-check"></i><b>1.1</b> Workshop Schedule</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#day-1"><i class="fa fa-check"></i>Day 1</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#day-2"><i class="fa fa-check"></i>Day 2</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="rmarkdown.html"><a href="rmarkdown.html"><i class="fa fa-check"></i><b>2</b> Rmarkdown</a><ul>
<li class="chapter" data-level="2.1" data-path="rmarkdown.html"><a href="rmarkdown.html#set-up-new-r-markdown-file"><i class="fa fa-check"></i><b>2.1</b> Set up new R Markdown file</a><ul>
<li class="chapter" data-level="2.1.1" data-path="rmarkdown.html"><a href="rmarkdown.html#r-markdown-componenets"><i class="fa fa-check"></i><b>2.1.1</b> R Markdown componenets</a></li>
<li class="chapter" data-level="2.1.2" data-path="rmarkdown.html"><a href="rmarkdown.html#knit-r-markdown"><i class="fa fa-check"></i><b>2.1.2</b> Knit R Markdown</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="rmarkdown.html"><a href="rmarkdown.html#knitr-chunk-options"><i class="fa fa-check"></i><b>2.2</b> Knitr Chunk Options</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="conditionals-and-loops.html"><a href="conditionals-and-loops.html"><i class="fa fa-check"></i><b>3</b> Conditionals and Loops</a><ul>
<li class="chapter" data-level="3.1" data-path="conditionals-and-loops.html"><a href="conditionals-and-loops.html#setup"><i class="fa fa-check"></i><b>3.1</b> Setup</a></li>
<li class="chapter" data-level="3.2" data-path="conditionals-and-loops.html"><a href="conditionals-and-loops.html#conditional-statements"><i class="fa fa-check"></i><b>3.2</b> Conditional statements</a><ul>
<li class="chapter" data-level="" data-path="conditionals-and-loops.html"><a href="conditionals-and-loops.html#if"><i class="fa fa-check"></i>if</a></li>
<li class="chapter" data-level="" data-path="conditionals-and-loops.html"><a href="conditionals-and-loops.html#ifelse"><i class="fa fa-check"></i>if…else</a></li>
<li class="chapter" data-level="" data-path="conditionals-and-loops.html"><a href="conditionals-and-loops.html#nested-ifelse-statements"><i class="fa fa-check"></i>Nested if…else statements</a></li>
<li class="chapter" data-level="" data-path="conditionals-and-loops.html"><a href="conditionals-and-loops.html#exercise-2.1"><i class="fa fa-check"></i>EXERCISE 2.1</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="conditionals-and-loops.html"><a href="conditionals-and-loops.html#loops"><i class="fa fa-check"></i><b>3.3</b> Loops</a><ul>
<li><a href="conditionals-and-loops.html#for-loop"><code>for</code> loop</a></li>
<li><a href="conditionals-and-loops.html#while-loop"><code>while</code> loop</a></li>
<li class="chapter" data-level="" data-path="conditionals-and-loops.html"><a href="conditionals-and-loops.html#exercise-2.2"><i class="fa fa-check"></i>EXERCISE 2.2</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i><b>4</b> Functions</a><ul>
<li class="chapter" data-level="4.1" data-path="functions.html"><a href="functions.html#parts-of-a-function"><i class="fa fa-check"></i><b>4.1</b> Parts of a function</a></li>
<li class="chapter" data-level="4.2" data-path="functions.html"><a href="functions.html#the-principle-of-encapsulation"><i class="fa fa-check"></i><b>4.2</b> The principle of encapsulation</a><ul>
<li class="chapter" data-level="4.2.1" data-path="functions.html"><a href="functions.html#environments"><i class="fa fa-check"></i><b>4.2.1</b> Environments</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="functions.html"><a href="functions.html#the-return-statement"><i class="fa fa-check"></i><b>4.3</b> The return statement</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="the-apply-family.html"><a href="the-apply-family.html"><i class="fa fa-check"></i><b>5</b> The apply family</a><ul>
<li class="chapter" data-level="5.1" data-path="the-apply-family.html"><a href="the-apply-family.html#apply"><i class="fa fa-check"></i><b>5.1</b> apply()</a></li>
<li class="chapter" data-level="5.2" data-path="the-apply-family.html"><a href="the-apply-family.html#lapply"><i class="fa fa-check"></i><b>5.2</b> lapply()</a><ul>
<li class="chapter" data-level="5.2.1" data-path="the-apply-family.html"><a href="the-apply-family.html#use-lapply-with-your-own-function"><i class="fa fa-check"></i><b>5.2.1</b> Use lapply with your own function</a></li>
<li class="chapter" data-level="5.2.2" data-path="the-apply-family.html"><a href="the-apply-family.html#lapply-and-anonymous-functions"><i class="fa fa-check"></i><b>5.2.2</b> lapply and anonymous functions</a></li>
<li class="chapter" data-level="5.2.3" data-path="the-apply-family.html"><a href="the-apply-family.html#use-lapply-with-additional-arguments"><i class="fa fa-check"></i><b>5.2.3</b> Use lapply with additional arguments</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="the-apply-family.html"><a href="the-apply-family.html#sapply"><i class="fa fa-check"></i><b>5.3</b> sapply()</a><ul>
<li class="chapter" data-level="5.3.1" data-path="the-apply-family.html"><a href="the-apply-family.html#sapply-with-your-own-function"><i class="fa fa-check"></i><b>5.3.1</b> sapply with your own function</a></li>
<li class="chapter" data-level="5.3.2" data-path="the-apply-family.html"><a href="the-apply-family.html#sapply-with-function-returning-vector"><i class="fa fa-check"></i><b>5.3.2</b> sapply with function returning vector</a></li>
<li class="chapter" data-level="5.3.3" data-path="the-apply-family.html"><a href="the-apply-family.html#sapply-cant-simplify-now-what"><i class="fa fa-check"></i><b>5.3.3</b> sapply can’t simplify, now what?</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="the-apply-family.html"><a href="the-apply-family.html#vapply"><i class="fa fa-check"></i><b>5.4</b> vapply()</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="advanced-plotting.html"><a href="advanced-plotting.html"><i class="fa fa-check"></i><b>6</b> Advanced Plotting</a><ul>
<li class="chapter" data-level="6.1" data-path="advanced-plotting.html"><a href="advanced-plotting.html#setup-1"><i class="fa fa-check"></i><b>6.1</b> Setup</a></li>
<li class="chapter" data-level="6.2" data-path="advanced-plotting.html"><a href="advanced-plotting.html#review-of-ggplot2-basics"><i class="fa fa-check"></i><b>6.2</b> Review of ggplot2 basics</a></li>
<li class="chapter" data-level="6.3" data-path="advanced-plotting.html"><a href="advanced-plotting.html#statistics"><i class="fa fa-check"></i><b>6.3</b> Statistics</a></li>
<li class="chapter" data-level="6.4" data-path="advanced-plotting.html"><a href="advanced-plotting.html#scales"><i class="fa fa-check"></i><b>6.4</b> Scales</a></li>
<li class="chapter" data-level="6.5" data-path="advanced-plotting.html"><a href="advanced-plotting.html#colour-palettes"><i class="fa fa-check"></i><b>6.5</b> Colour palettes</a><ul>
<li><a href="advanced-plotting.html#colorramp"><code>colorRamp()</code></a></li>
<li><a href="advanced-plotting.html#colorramppalette"><code>colorRampPalette()</code></a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="advanced-plotting.html"><a href="advanced-plotting.html#faceting"><i class="fa fa-check"></i><b>6.6</b> Faceting</a><ul>
<li><a href="advanced-plotting.html#facet_wrap"><code>facet_wrap()</code></a></li>
<li><a href="advanced-plotting.html#facet_grid"><code>facet_grid()</code></a></li>
<li class="chapter" data-level="" data-path="advanced-plotting.html"><a href="advanced-plotting.html#exercise-5.6"><i class="fa fa-check"></i>Exercise 5.6</a></li>
</ul></li>
<li class="chapter" data-level="6.7" data-path="advanced-plotting.html"><a href="advanced-plotting.html#themes"><i class="fa fa-check"></i><b>6.7</b> Themes</a></li>
<li class="chapter" data-level="6.8" data-path="advanced-plotting.html"><a href="advanced-plotting.html#multiple-plots"><i class="fa fa-check"></i><b>6.8</b> Multiple plots</a><ul>
<li><a href="advanced-plotting.html#the-gridextra-package">The <code>gridExtra</code> package</a></li>
<li><a href="advanced-plotting.html#the-cowplot-package">The <code>cowplot</code> package</a></li>
<li class="chapter" data-level="6.8.1" data-path="advanced-plotting.html"><a href="advanced-plotting.html#saving-plots"><i class="fa fa-check"></i><b>6.8.1</b> Saving plots</a></li>
<li class="chapter" data-level="" data-path="advanced-plotting.html"><a href="advanced-plotting.html#exercise-8.1"><i class="fa fa-check"></i>Exercise 8.1</a></li>
</ul></li>
<li class="chapter" data-level="6.9" data-path="advanced-plotting.html"><a href="advanced-plotting.html#additional-resources"><i class="fa fa-check"></i><b>6.9</b> Additional Resources</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="project.html"><a href="project.html"><i class="fa fa-check"></i><b>7</b> Project</a><ul>
<li class="chapter" data-level="7.1" data-path="project.html"><a href="project.html#setup-2"><i class="fa fa-check"></i><b>7.1</b> Setup</a></li>
<li class="chapter" data-level="7.2" data-path="project.html"><a href="project.html#task-1"><i class="fa fa-check"></i><b>7.2</b> Task 1</a></li>
<li class="chapter" data-level="7.3" data-path="project.html"><a href="project.html#task-2"><i class="fa fa-check"></i><b>7.3</b> Task 2</a></li>
<li class="chapter" data-level="7.4" data-path="project.html"><a href="project.html#task3"><i class="fa fa-check"></i><b>7.4</b> Task3</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="usefull-links.html"><a href="usefull-links.html"><i class="fa fa-check"></i><b>8</b> Usefull links</a><ul>
<li class="chapter" data-level="8.1" data-path="usefull-links.html"><a href="usefull-links.html#cheatsheets"><i class="fa fa-check"></i><b>8.1</b> CheatSheets</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Intermediate R Workshop Notes</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="the-apply-family" class="section level1">
<h1><span class="header-section-number">Chapter 5</span> The apply family</h1>
<div class="box">
<h4 id="learning-objectives-3" class="unnumbered">Learning Objectives</h4>
<p>Learn to use apply family functions in place of loops.</p>
</div>
<p>Whenever you’re using a for loop, you might want to revise your code and see whether you can use the lapply function instead. Learn all about this intuitive way of applying a function over a list or a vector, and its variants sapply and vapply.</p>
<div id="apply" class="section level2">
<h2><span class="header-section-number">5.1</span> apply()</h2>
<p>apply() takes Data frame or matrix as an input and gives output in vector, list or array. apply() Function is primarily used to avoid explicit uses of loop constructs. It is the most basic of all collections can be used over a matrice.</p>
<p>This function takes 3 arguments:</p>
<pre><code>apply(X, MARGIN, FUN)</code></pre>
<p>apply() takes an array or matrix <code>X</code>, a <code>Margin</code> that takes a value 1 for rows or 2 for columns and applies a functoin <code>FUN</code> to it.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="the-apply-family.html#cb2-1"></a>m1 &lt;-<span class="st"> </span><span class="kw">matrix</span>(C&lt;-(<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>),<span class="dt">nrow=</span><span class="dv">5</span>, <span class="dt">ncol=</span><span class="dv">6</span>)</span>
<span id="cb2-2"><a href="the-apply-family.html#cb2-2"></a>m1</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4] [,5] [,6]
## [1,]    1    6    1    6    1    6
## [2,]    2    7    2    7    2    7
## [3,]    3    8    3    8    3    8
## [4,]    4    9    4    9    4    9
## [5,]    5   10    5   10    5   10</code></pre>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="the-apply-family.html#cb4-1"></a>a_m1 &lt;-<span class="st"> </span><span class="kw">apply</span>(m1, <span class="dv">2</span>, sum)</span>
<span id="cb4-2"><a href="the-apply-family.html#cb4-2"></a>a_m1</span></code></pre></div>
<pre><code>## [1] 15 40 15 40 15 40</code></pre>
<p><img src="img/apply.png" /></p>
<div class="box">
<h4 id="exercise-3" class="unnumbered">Exercise</h4>
<p>Select the columns from count.raw file from pdfDownloadsCount to hmtlDownloadsCount and using the apply function find the mean of each column.</p>
<!-- # ```{r} -->
<!-- # counts<-read.table("img/counts-raw.txt",header = T) -->
<!-- # counts %>% select(pdfDownloadsCount:htmlDownloadsCount) %>% apply(.,2,mean) -->
<!-- # ``` -->
</div>
<p><br></p>
</div>
<div id="lapply" class="section level2">
<h2><span class="header-section-number">5.2</span> lapply()</h2>
<p>Before you go about solving the exercises below, have a look at the documentation of the <code>lapply()</code> function. The Usage section shows the following expression:</p>
<pre><code>lapply(X, FUN, ...)</code></pre>
<p>To put it generally, <code>lapply</code> takes a vector or list <code>X</code>, and applies the function <code>FUN</code> to each of its members. If <code>FUN</code> requires additional arguments, you pass them after you’ve specified <code>X</code> and <code>FUN</code> (<code>...</code>). The output of <code>lapply()</code> is a list, the same length as <code>X</code>, where each element is the result of applying <code>FUN</code> on the corresponding element of <code>X</code>.</p>
<p>Now that you are truly brushing up on your data science skills, let’s revisit some of the most relevant figures in data science history. We’ve compiled a vector of famous mathematicians/statisticians and the year they were born. Up to you to extract some information!</p>
<div id="example" class="section level4">
<h4><span class="header-section-number">5.2.0.1</span> Example</h4>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="the-apply-family.html#cb7-1"></a><span class="co"># The vector pioneers has already been created for you</span></span>
<span id="cb7-2"><a href="the-apply-family.html#cb7-2"></a>pioneers &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;GAUSS:1777&quot;</span>, <span class="st">&quot;BAYES:1702&quot;</span>, <span class="st">&quot;PASCAL:1623&quot;</span>, <span class="st">&quot;PEARSON:1857&quot;</span>)</span>
<span id="cb7-3"><a href="the-apply-family.html#cb7-3"></a></span>
<span id="cb7-4"><a href="the-apply-family.html#cb7-4"></a><span class="co"># Split names from birth year to make split_math a list</span></span>
<span id="cb7-5"><a href="the-apply-family.html#cb7-5"></a>split_math &lt;-<span class="st"> </span><span class="kw">strsplit</span>(pioneers, <span class="dt">split =</span> <span class="st">&quot;:&quot;</span>)</span>
<span id="cb7-6"><a href="the-apply-family.html#cb7-6"></a><span class="co"># Convert to lowercase strings: split_low</span></span>
<span id="cb7-7"><a href="the-apply-family.html#cb7-7"></a>split_low &lt;-<span class="st"> </span><span class="kw">lapply</span>(split_math, tolower)</span>
<span id="cb7-8"><a href="the-apply-family.html#cb7-8"></a><span class="co"># Take a look at the structure of split_low</span></span>
<span id="cb7-9"><a href="the-apply-family.html#cb7-9"></a><span class="kw">str</span>(split_low)</span></code></pre></div>
<pre><code>## List of 4
##  $ : chr [1:2] &quot;gauss&quot; &quot;1777&quot;
##  $ : chr [1:2] &quot;bayes&quot; &quot;1702&quot;
##  $ : chr [1:2] &quot;pascal&quot; &quot;1623&quot;
##  $ : chr [1:2] &quot;pearson&quot; &quot;1857&quot;</code></pre>
</div>
<div id="use-lapply-with-your-own-function" class="section level3">
<h3><span class="header-section-number">5.2.1</span> Use lapply with your own function</h3>
<p>You can use <code>lapply()</code> on your own functions as well. You just need to code a new function and make sure it is available in the workspace. After that, you can use the function inside <code>lapply()</code> just as you did with base R functions. We have already created a select_first() function so lets apply it to a</p>
<div class="box">
<h4 id="exercise-4" class="unnumbered">Exercise</h4>
<p>Use lapply on split_low list and use the select_first() function you created.</p>
</div>
<!-- ```{r} -->
<!-- select_first <- function(x) { -->
<!--   x[1] -->
<!-- } -->
<!-- # Apply select_first() over split_low: names -->
<!-- names <- lapply(split_low, select_first) -->
<!-- ``` -->
</div>
<div id="lapply-and-anonymous-functions" class="section level3">
<h3><span class="header-section-number">5.2.2</span> lapply and anonymous functions</h3>
<p>Writing your own functions and then using them inside <code>lapply()</code> is quite an accomplishment! But defining functions to use them only once is kind of overkill, isn’t it? That’s why you can use so-called <strong>anonymous functions</strong> in R.</p>
<p>Previously, you learned that functions in R are objects in their own right. This means that they aren’t automatically bound to a name. When you create a function, you can use the assignment operator to give the function a name. It’s perfectly possible, however, to not give the function a name. This is called an anonymous function:</p>
<pre><code># Named function
select_first &lt;- function(x) { x[1] }

# Use anonymous function inside lapply()
lapply(list(1,2,3), function(x) {x[1]})</code></pre>
<div id="example-1" class="section level4">
<h4><span class="header-section-number">5.2.2.1</span> Example</h4>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="the-apply-family.html#cb10-1"></a><span class="co"># Transform: use anonymous function inside lapply</span></span>
<span id="cb10-2"><a href="the-apply-family.html#cb10-2"></a>names &lt;-<span class="st"> </span><span class="kw">lapply</span>(split_low, <span class="cf">function</span>(x) { x[<span class="dv">1</span>] })</span></code></pre></div>
</div>
</div>
<div id="use-lapply-with-additional-arguments" class="section level3">
<h3><span class="header-section-number">5.2.3</span> Use lapply with additional arguments</h3>
<p>In the video, the <code>triple()</code> function was transformed to the <code>multiply()</code> function to allow for a more generic approach. <code>lapply()</code> provides a way to handle functions that require more than one argument, such as the <code>multiply()</code> function:</p>
<pre><code>multiply &lt;- function(x, factor) {
  x * factor
}

lapply(list(1,2,3), multiply, factor = 3)</code></pre>
<p>On the right we’ve included a generic version of the select functions that you’ve coded earlier: <code>select_el()</code>. It takes a vector as its first argument, and an index as its second argument. It returns the vector’s element at the specified index.</p>
<div id="example-2" class="section level4">
<h4><span class="header-section-number">5.2.3.1</span> Example</h4>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="the-apply-family.html#cb12-1"></a><span class="co"># Generic select function</span></span>
<span id="cb12-2"><a href="the-apply-family.html#cb12-2"></a>select_el &lt;-<span class="st"> </span><span class="cf">function</span>(x, index) {</span>
<span id="cb12-3"><a href="the-apply-family.html#cb12-3"></a>  x[index]</span>
<span id="cb12-4"><a href="the-apply-family.html#cb12-4"></a>}</span>
<span id="cb12-5"><a href="the-apply-family.html#cb12-5"></a><span class="co"># Use lapply() twice on split_low: names and years</span></span>
<span id="cb12-6"><a href="the-apply-family.html#cb12-6"></a>names &lt;-<span class="st"> </span><span class="kw">lapply</span>(split_low, select_el, <span class="dt">index =</span> <span class="dv">1</span>)</span>
<span id="cb12-7"><a href="the-apply-family.html#cb12-7"></a>years &lt;-<span class="st"> </span><span class="kw">lapply</span>(split_low, select_el, <span class="dt">index =</span> <span class="dv">2</span>)</span></code></pre></div>
</div>
</div>
</div>
<div id="sapply" class="section level2">
<h2><span class="header-section-number">5.3</span> sapply()</h2>
<p>You can use <code>sapply()</code> similar to how you used <code>lapply()</code>. sapply is a user-friendly version and wrapper of lapply by default returning a vector, matrix .The first argument of <code>sapply()</code> is the list or vector <code>X</code> over which you want to apply a function, <code>FUN</code>. Potential additional arguments to this function are specified afterwards (<code>...</code>):</p>
<pre><code>sapply(X, FUN, ...)</code></pre>
<div id="example-3" class="section level4">
<h4><span class="header-section-number">5.3.0.1</span> Example</h4>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="the-apply-family.html#cb14-1"></a><span class="co"># Constructing temp variable</span></span>
<span id="cb14-2"><a href="the-apply-family.html#cb14-2"></a>names &lt;-<span class="st"> </span><span class="kw">sapply</span>(split_low, select_el, <span class="dt">index =</span> <span class="dv">1</span>)</span></code></pre></div>
</div>
<div id="sapply-with-your-own-function" class="section level3">
<h3><span class="header-section-number">5.3.1</span> sapply with your own function</h3>
<p>Like <code>lapply()</code>, <code>sapply()</code> allows you to use self-defined functions and apply them over a vector or a list:</p>
<pre><code>sapply(X, FUN, ...)</code></pre>
<p>Here, <code>FUN</code> can be one of R’s built-in functions, but it can also be a function you wrote. This self-written function can be defined before hand, or can be inserted directly as an anonymous function.</p>
</div>
<div id="sapply-with-function-returning-vector" class="section level3">
<h3><span class="header-section-number">5.3.2</span> sapply with function returning vector</h3>
<p>In the previous exercises, you’ve seen how <code>sapply()</code> simplifies the list that <code>lapply()</code> would return by turning it into a vector. But what if the function you’re applying over a list or a vector returns a vector of length greater than 1? If you don’t remember from the video, don’t waste more time in the valley of ignorance and head over to the instructions!</p>
<div id="example-4" class="section level4">
<h4><span class="header-section-number">5.3.2.1</span> Example</h4>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="the-apply-family.html#cb16-1"></a>temp=<span class="kw">list</span>(<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">4</span>,<span class="dv">6</span>),<span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">6</span>,<span class="dv">8</span>,<span class="dv">9</span>))</span>
<span id="cb16-2"><a href="the-apply-family.html#cb16-2"></a><span class="co"># Create a function that returns min and max of a vector: extremes</span></span>
<span id="cb16-3"><a href="the-apply-family.html#cb16-3"></a>extremes &lt;-<span class="st"> </span><span class="cf">function</span>(x) {</span>
<span id="cb16-4"><a href="the-apply-family.html#cb16-4"></a>  <span class="kw">c</span>(<span class="dt">min =</span> <span class="kw">min</span>(x), <span class="dt">max =</span> <span class="kw">max</span>(x))</span>
<span id="cb16-5"><a href="the-apply-family.html#cb16-5"></a>}</span>
<span id="cb16-6"><a href="the-apply-family.html#cb16-6"></a><span class="co"># Apply extremes() over temp with lapply()</span></span>
<span id="cb16-7"><a href="the-apply-family.html#cb16-7"></a><span class="kw">lapply</span>(temp, extremes)</span></code></pre></div>
<pre><code>## [[1]]
## min max 
##   1   6 
## 
## [[2]]
## min max 
##   3   9</code></pre>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="the-apply-family.html#cb18-1"></a><span class="co"># Apply extremes() over temp with sapply()</span></span>
<span id="cb18-2"><a href="the-apply-family.html#cb18-2"></a><span class="kw">sapply</span>(temp, extremes)</span></code></pre></div>
<pre><code>##     [,1] [,2]
## min    1    3
## max    6    9</code></pre>
</div>
</div>
<div id="sapply-cant-simplify-now-what" class="section level3">
<h3><span class="header-section-number">5.3.3</span> sapply can’t simplify, now what?</h3>
<p>It seems like we’ve hit the jackpot with <code>sapply()</code>. On all of the examples so far, <code>sapply()</code> was able to nicely simplify the rather bulky output of <code>lapply()</code>. But, as with life, there are things you can’t simplify. How does <code>sapply()</code> react?</p>
<p>We already created a function, <code>below_zero()</code>, that takes a vector of numerical values and returns a vector that only contains the values that are strictly below zero.</p>
<div id="example-5" class="section level4">
<h4><span class="header-section-number">5.3.3.1</span> Example</h4>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="the-apply-family.html#cb20-1"></a><span class="co"># temp is already prepared for you in the workspace</span></span>
<span id="cb20-2"><a href="the-apply-family.html#cb20-2"></a><span class="co"># Definition of below_zero()</span></span>
<span id="cb20-3"><a href="the-apply-family.html#cb20-3"></a>below_zero &lt;-<span class="st"> </span><span class="cf">function</span>(x) {</span>
<span id="cb20-4"><a href="the-apply-family.html#cb20-4"></a>  <span class="kw">return</span>(x[x <span class="op">&lt;</span><span class="st"> </span><span class="dv">0</span>])</span>
<span id="cb20-5"><a href="the-apply-family.html#cb20-5"></a>}</span>
<span id="cb20-6"><a href="the-apply-family.html#cb20-6"></a><span class="co"># Apply below_zero over temp using lapply(): freezing_l</span></span>
<span id="cb20-7"><a href="the-apply-family.html#cb20-7"></a>freezing_l &lt;-<span class="st"> </span><span class="kw">lapply</span>(temp, below_zero)</span>
<span id="cb20-8"><a href="the-apply-family.html#cb20-8"></a><span class="co"># Apply below_zero over temp using sapply(): freezing_s</span></span>
<span id="cb20-9"><a href="the-apply-family.html#cb20-9"></a>freezing_s &lt;-<span class="st"> </span><span class="kw">sapply</span>(temp, below_zero)</span>
<span id="cb20-10"><a href="the-apply-family.html#cb20-10"></a><span class="co"># Are freezing_l and freezing_s identical?</span></span>
<span id="cb20-11"><a href="the-apply-family.html#cb20-11"></a><span class="kw">identical</span>(freezing_l, freezing_s)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
</div>
</div>
</div>
<div id="vapply" class="section level2">
<h2><span class="header-section-number">5.4</span> vapply()</h2>
<p>Before you get your hands dirty with the third and last apply function that you’ll learn about in this intermediate R course, let’s take a look at its syntax. The function is called <code>vapply()</code>, and it has the following syntax:</p>
<pre><code>vapply(X, FUN, FUN.VALUE, ..., USE.NAMES = TRUE)</code></pre>
<p>Over the elements inside <code>X</code>, the function <code>FUN</code> is applied. The <code>FUN.VALUE</code> argument expects a template for the return argument of this function <code>FUN</code>. <code>USE.NAMES</code> is <code>TRUE</code> by default; in this case <code>vapply()</code> tries to generate a named array, if possible.</p>
<p>For the next set of exercises, you’ll be working on the <code>temp</code> list again, that contains 7 numerical vectors of length 5. We also coded a function <code>basics()</code> that takes a vector, and returns a named vector of length 3, containing the minimum, mean and maximum value of the vector respectively.</p>
<div id="example-6" class="section level4">
<h4><span class="header-section-number">5.4.0.1</span> Example</h4>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="the-apply-family.html#cb23-1"></a><span class="co"># temp is already available in the workspace</span></span>
<span id="cb23-2"><a href="the-apply-family.html#cb23-2"></a><span class="co"># Definition of basics()</span></span>
<span id="cb23-3"><a href="the-apply-family.html#cb23-3"></a>basics &lt;-<span class="st"> </span><span class="cf">function</span>(x) {</span>
<span id="cb23-4"><a href="the-apply-family.html#cb23-4"></a>  <span class="kw">c</span>(<span class="dt">min =</span> <span class="kw">min</span>(x), <span class="dt">mean =</span> <span class="kw">mean</span>(x), <span class="dt">max =</span> <span class="kw">max</span>(x))</span>
<span id="cb23-5"><a href="the-apply-family.html#cb23-5"></a>}</span>
<span id="cb23-6"><a href="the-apply-family.html#cb23-6"></a><span class="co"># Apply basics() over temp using vapply()</span></span>
<span id="cb23-7"><a href="the-apply-family.html#cb23-7"></a><span class="kw">vapply</span>(temp, basics, <span class="kw">numeric</span>(<span class="dv">3</span>))</span></code></pre></div>
<pre><code>##      [,1] [,2]
## min   1.0    3
## mean  3.6    6
## max   6.0    9</code></pre>
<div class="box">
<h4 id="exercise-5"><span class="header-section-number">5.4.0.1</span> Exercise</h4>
<p><code>article&lt;-list(counts$year,counts$articleType)</code>
<br>
Use the table() function and one of the apply functions to see how many counts of each year and articleType are available.
Explain which function you used and what does the output look like?</p>
</div>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="functions.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="advanced-plotting.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["Notes.pdf", "Notes.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
